import { NextApiRequest, NextApiResponse } from "next";

const stations = [
  {
    id: "Rangkasbitung",
    name: "Rangkasbitung",
    nodes: ["Citeras"],
    track: "Rangkasbitung",
    isTransit: false,
    lat: -6.352665333833668,
    long: 106.2514920090764,
  },
  {
    id: "Citeras",
    name: "Citeras",
    nodes: ["Rangkasbitung", "Maja"],
    isTransit: false,
    track: "Rangkasbitung",
    lat: -6.3350235602227,
    long: 106.33263947036774,
  },
  {
    id: "Maja",
    name: "Maja",
    nodes: ["Citeras", "Cikoya"],
    isTransit: false,
    track: "Rangkasbitung",
    lat: -6.332500689202384,
    long: 106.39644383102204,
  },
  {
    id: "Cikoya",
    name: "Cikoya",
    nodes: ["Maja", "Tigaraksa"],
    isTransit: false,
    track: "Rangkasbitung",
    lat: -6.3357310588924,
    long: 106.41177305562877,
  },
  {
    id: "Tigaraksa",
    name: "Tigaraksa",
    nodes: ["Cikoya", "Tenjo"],
    isTransit: false,
    track: "Rangkasbitung",
    lat: -6.328559922325632,
    long: 106.43477959550867,
  },
  {
    id: "Tenjo",
    name: "Tenjo",
    nodes: ["Tigaraksa", "Daru"],
    isTransit: false,
    track: "Rangkasbitung",
    lat: -6.327161842331267,
    long: 106.4614024635554,
  },
  {
    id: "Daru",
    name: "Daru",
    nodes: ["Tenjo", "Cilenjit"],
    isTransit: false,
    track: "Rangkasbitung",
    lat: -6.337955351303173,
    long: 106.49255403785001,
  },
  {
    id: "Cilejit",
    name: "Cilejit",
    nodes: ["Daru", "ParungPanjang"],
    isTransit: false,
    track: "Rangkasbitung",
    lat: -6.354256496220418,
    long: 106.50962105379215,
  },
  {
    id: "ParungPanjang",
    name: "Parung Panjang",
    nodes: ["Cilejit", "Cicayur"],
    isTransit: false,
    track: "Rangkasbitung",
    lat: -6.344390614526794,
    long: 106.56989118322751,
  },
  {
    id: "Cicayur",
    name: "Cicayur",
    nodes: ["ParungPanjang", "Cisauk"],
    isTransit: false,
    track: "Rangkasbitung",
    lat: -6.329671892581207,
    long: 106.61901646422432,
  },
  {
    id: "Cisauk",
    name: "Cisauk",
    nodes: ["Cicayur", "Serpong"],
    isTransit: false,
    track: "Rangkasbitung",
    lat: -6.324808905993144,
    long: 106.64093962188294,
  },
  {
    id: "Serpong",
    name: "Serpong",
    nodes: ["Cisauk", "RawaBuntu"],
    isTransit: false,
    track: "Rangkasbitung",
    lat: -6.3201743175521035,
    long: 106.66562748813726,
  },
  {
    id: "RawaBuntu",
    name: "Rawa Buntu",
    nodes: ["Serpong", "Sudimara"],
    isTransit: false,
    track: "Rangkasbitung",
    lat: -6.314930466318556,
    long: 106.6760946169853,
  },
  {
    id: "Sudimara",
    name: "Sudimara",
    nodes: ["RawaBuntu", "JurangMangu"],
    isTransit: false,
    track: "Rangkasbitung",
    lat: -6.2968095668319854,
    long: 106.7127338433471,
  },
  {
    id: "JurangMangu",
    name: "Jurang Mangu",
    nodes: ["Sudimara", "PondokRanji"],
    isTransit: false,
    track: "Rangkasbitung",
    lat: -6.288644123548759,
    long: 106.72908165501616,
  },
  {
    id: "PondokRanji",
    name: "Pondok Ranji",
    nodes: ["JurangMangu", "Kebayoran"],
    isTransit: false,
    track: "Rangkasbitung",
    lat: -6.276468708467786,
    long: 106.74499611085292,
  },
  {
    id: "Kebayoran",
    name: "Kebayoran",
    nodes: ["PondokRanji", "Palmerah"],
    isTransit: false,
    track: "Rangkasbitung",
    lat: -6.237230164322067,
    long: 106.78251109795664,
  },
  {
    id: "Palmerah",
    name: "Palmerah",
    nodes: ["Kebayoran", "TanahAbang"],
    isTransit: false,
    track: "Rangkasbitung",
    lat: -6.207411028741527,
    long: 106.79745701391096,
  },
  {
    id: "TanahAbang",
    name: "Tanah Abang",
    isTransit: true,
    nodes: ["Palmerah", "Karet", "Duri"],
    track: "",
    lat: -6.185668096455771,
    long: 106.81084555071735,
  },
  {
    id: "Duri",
    name: "Duri",
    isTransit: true,
    nodes: ["TanahAbang", "Grogol", "Angke"],
    track: "",
    lat: -6.1553144983326975,
    long: 106.80143398262611,
  },
  {
    id: "Angke",
    name: "Angke",
    nodes: ["Duri", "KampungBandan"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.144686895941865,
    long: 106.80085095071706,
  },
  {
    id: "Grogol",
    name: "Grogol",
    nodes: ["Duri", "Pesing"],
    isTransit: false,
    track: "Tangerang",
    lat: -6.1621440308484825,
    long: 106.7893675740305,
  },
  {
    id: "Pesing",
    name: "Pesing",
    nodes: ["Grogol", "TamanKota"],
    isTransit: false,
    track: "Tangerang",
    lat: -6.161355329000215,
    long: 106.77230595623945,
  },
  {
    id: "Tamankota",
    name: "Taman Kota",
    nodes: ["Pesing", "BojongIndah"],
    isTransit: false,
    track: "Tangerang",
    lat: -6.158739326311666,
    long: 106.75708005562724,
  },
  {
    id: "BojongIndah",
    name: "Bojong Indah",
    nodes: ["TamanKota", "RawaBuaya"],
    isTransit: false,
    track: "Tangerang",
    lat: -6.160270155503117,
    long: 106.73593954556328,
  },
  {
    id: "RawaBuaya",
    name: "Rawa Buaya",
    nodes: ["BojongIndah", "Kalideres"],
    isTransit: false,
    track: "Tangerang",
    lat: -6.162652897152915,
    long: 106.72361284038362,
  },
  {
    id: "Kalideres",
    name: "Kali Deres",
    nodes: ["Rawabuaya", "Poris"],
    isTransit: false,
    track: "Tangerang",
    lat: -6.16598109465824,
    long: 106.70378383353827,
  },
  {
    id: "Poris",
    name: "Poris",
    nodes: ["Kalideres", "BatuCeper"],
    isTransit: false,
    track: "Tangerang",
    lat: -6.169868028707455,
    long: 106.68000502679172,
  },
  {
    id: "BatuCeper",
    name: "Batu Ceper",
    nodes: ["Poris", "TanahTinggi"],
    isTransit: false,
    track: "Tangerang",
    lat: -6.172201995868258,
    long: 106.66531999734387,
  },
  {
    id: "TanahTinggi",
    name: "Tanah Tinggi",
    nodes: ["BatuCeper", "Tangerang"],
    isTransit: false,
    track: "Tangerang",
    lat: -6.175339229203533,
    long: 106.64544170347835,
  },
  {
    id: "Tangerang",
    name: "Tangerang",
    nodes: ["TanahTinggi"],
    isTransit: false,
    track: "Tangerang",
    lat: -6.176917127527923,
    long: 106.63270846911412,
  },
  {
    id: "Karet",
    name: "Karet",
    nodes: ["TanahAbang", "BNICity"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.2008063142784735,
    long: 106.81615312007379,
  },
  {
    id: "BNICity",
    name: "BNI City",
    nodes: ["Karet", "Sudirman"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.201800382518876,
    long: 106.82108528288794,
  },
  {
    id: "Sudirman",
    name: "Sudirman",
    nodes: ["BNICity", "Manggarai"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.2024190532518935,
    long: 106.82345962437755,
  },
  {
    id: "Manggarai",
    name: "Manggarai",
    isTransit: true,
    nodes: ["Sudirman", "Matraman", "Cikini", "Tebet"],
    track: "",
    lat: -6.209977259858295,
    long: 106.85006191390855,
  },
  {
    id: "Matraman",
    name: "Matraman",
    nodes: ["Manggarai", "Jatinegara"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.212228616817807,
    long: 106.86017191506158,
  },
  {
    id: "Jatinegara",
    name: "Jatinegara",
    isTransit: true,
    nodes: ["Matraman", "PondokJati", "Klender"],
    track: "",
    lat: -6.214965339712982,
    long: 106.87026135623276,
  },
  {
    id: "Klender",
    name: "Klender",
    nodes: ["Jatinegara", "Buaran"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.2133245964565536,
    long: 106.89963218997305,
  },
  {
    id: "Buaran",
    name: "Buaran",
    nodes: ["Klender", "KlenderBaru"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.215559863285035,
    long: 106.92315659427099,
  },
  {
    id: "Klenderbaru",
    name: "Klender Baru",
    nodes: ["Buaran", "Cakung"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.217588701491893,
    long: 106.94010956728427,
  },
  {
    id: "Cakung",
    name: "Cakung",
    nodes: ["KlenderBaru", "Kranji"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.219056381254263,
    long: 106.95237804822044,
  },
  {
    id: "Kranji",
    name: "Kranji",
    nodes: ["Cakung", "Bekasi"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.224509063302872,
    long: 106.97984790900108,
  },
  {
    id: "Bekasi",
    name: "Bekasi",
    nodes: ["Kranji", "BekasiTimur"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.236455482687183,
    long: 106.99913903598774,
  },
  {
    id: "BekasiTimur",
    name: "Bekasi Timur",
    nodes: ["Bekasi", "Tambun"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.247744996053792,
    long: 107.01685935010555,
  },
  {
    id: "Tambun",
    name: "Tambun",
    nodes: ["BekasiTimur", "Cibitung"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.25853712275732,
    long: 107.05582508323921,
  },
  {
    id: "Cibitung",
    name: "Cibitung",
    nodes: ["Tambun", "MetlandTelagaMurni"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.261842202366531,
    long: 107.08362928568809,
  },
  {
    id: "MetlandTelagaMurni",
    name: "Metland Telaga Murni",
    nodes: ["Cibitung", "Cikarang"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.2574263505635415,
    long: 107.11122028324523,
  },
  {
    id: "Cikarang",
    name: "Cikarang",
    nodes: ["MetlandTelagaMurni"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.255067369193651,
    long: 107.14523174643256,
  },
  {
    id: "PondokJati",
    name: "Pondok Jati",
    nodes: ["Jatinegara", "Kramat"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.20914719881826,
    long: 106.86234213538768,
  },
  {
    id: "Kramat",
    name: "Kramat",
    nodes: ["PondokJati", "GangSentiong"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.193751383122919,
    long: 106.85659239791005,
  },
  {
    id: "GangSentiong",
    name: "Gang Sentiong",
    nodes: ["Kramat", "PasarSenen"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.185930963572854,
    long: 106.85068983661675,
  },
  {
    id: "PasarSenen",
    name: "Pasar Senen",
    nodes: ["GangSentiong", "Kemayoran"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.17467366299034,
    long: 106.84451915811756,
  },
  {
    id: "Kemayoran",
    name: "Kemayoran",
    nodes: ["PasarSenen", "Rajawali"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.161689794757739,
    long: 106.84151245564105,
  },
  {
    id: "Rajawali",
    name: "Rajawali",
    nodes: ["Kemayoran", "KampungBandan"],
    isTransit: false,
    track: "Cikarang",
    lat: -6.145019660480458,
    long: 106.83675927096941,
  },
  {
    id: "KampungBandan",
    name: "Kampung Bandan",
    isTransit: true,
    nodes: ["Rajawali", "Ancol", "JakartaKota", "Angke"],
    track: "",
    lat: -6.132505225360206,
    long: 106.8285756550148,
  },
  {
    id: "Ancol",
    name: "Ancol",
    nodes: ["KampungBandan", "TanjungPriok"],
    isTransit: false,
    track: "Tanjung Priok",
    lat: -6.128065933528671,
    long: 106.84515593171196,
  },
  {
    id: "TanjungPriok",
    name: "Tanjung Priok",
    nodes: ["Ancol"],
    isTransit: false,
    track: "Tanjung Priok",
    lat: -6.1117260097492725,
    long: 106.88012786379518,
  },
  {
    id: "JakartaKota",
    name: "Jakarta Kota",
    isTransit: true,
    nodes: ["KampungBandan", "Jayakarta"],
    track: "Bogor",
    lat: -6.1374658929072305,
    long: 106.81475674584236,
  },
  {
    id: "Jayakarta",
    name: "Jayakarta",
    isTransit: false,
    nodes: ["JakartaKota", "ManggaBesar"],
    track: "Bogor",
    lat: -6.141453909201498,
    long: 106.8230671985821,
  },
  {
    id: "ManggaBesar",
    name: "Mangga Besar",
    isTransit: false,
    nodes: ["Jayakarta", "SawahBesar"],
    track: "Bogor",
    lat: -6.149759261593002,
    long: 106.82698942188132,
  },
  {
    id: "SawahBesar",
    name: "Sawah Besar",
    isTransit: false,
    nodes: ["ManggaBesar", "Juanda"],
    track: "Bogor",
    lat: -6.160747981599402,
    long: 106.82759968624944,
  },
  {
    id: "Juanda",
    name: "Juanda",
    isTransit: false,
    nodes: ["SawahBesar", "Gondangdia"],
    track: "Bogor",
    lat: -6.166714928807848,
    long: 106.83041331819602,
  },
  {
    id: "Gondangdia",
    name: "Gondangdia",
    isTransit: false,
    nodes: ["Juanda", "Cikini"],
    track: "Bogor",
    lat: -6.18592000174308,
    long: 106.83260501206173,
  },
  {
    id: "Cikini",
    name: "Cikini",
    nodes: ["Gondangdia", "Manggarai"],
    isTransit: false,
    track: "Bogor",
    lat: -6.198542962860292,
    long: 106.8412136764737,
  },
  {
    id: "Tebet",
    name: "Tebet",
    nodes: ["Manggarai", "Cawang"],
    isTransit: false,
    track: "Bogor",
    lat: -6.226039802990169,
    long: 106.85834741207617,
  },
  {
    id: "Cawang",
    name: "Cawang",
    nodes: ["Tebet", "DurenKalibata"],
    isTransit: false,
    track: "Bogor",
    lat: -6.2424948984560205,
    long: 106.85869950837821,
  },
  {
    id: "DurenKalibata",
    name: "Duren Kalibata",
    nodes: ["Cawang", "PasarMingguBaru"],
    isTransit: false,
    track: "Bogor",
    lat: -6.254658537035947,
    long: 106.85535608021571,
  },
  {
    id: "PasarMingguBaru",
    name: "Pasar Minggu Baru",
    isTransit: false,
    nodes: ["DurenKalibata", "PasarMinggu"],
    track: "Bogor",
    lat: -6.262728301387609,
    long: 106.85180764519583,
  },
  {
    id: "PasarMinggu",
    name: "Pasar Minggu",
    nodes: ["PasarMingguBaru", "TanjungBarat"],
    isTransit: false,
    track: "Bogor",
    lat: -6.284049537660005,
    long: 106.84456651391157,
  },
  {
    id: "TanjungBarat",
    name: "Tanjung Barat",
    nodes: ["PasarMinggu", "LentengAgung"],
    isTransit: false,
    track: "Bogor",
    lat: -6.308356461812255,
    long: 106.83882751884637,
  },
  {
    id: "LentengAgung",
    name: "Lenteng Agung",
    nodes: ["TanjungBarat", "UnivPancasila"],
    isTransit: false,
    track: "Bogor",
    lat: -6.330389722253905,
    long: 106.83476798753124,
  },
  {
    id: "UnivPancasila",
    name: "Univ. Pancasila",
    isTransit: false,
    nodes: ["Lentengagung", "UnivIndonesia"],
    track: "Bogor",
    lat: -6.3389043734201005,
    long: 106.83437481206384,
  },
  {
    id: "UnivIndonesia",
    name: "Univ. Indonesia",
    isTransit: false,
    nodes: ["UnivPancasila", "PondokCina"],
    track: "Bogor",
    lat: -6.360744765449822,
    long: 106.83175614397226,
  },
  {
    id: "PondokCina",
    name: "Pondok Cina",
    isTransit: false,
    nodes: ["UnivIndonesia", "DepokBaru"],
    track: "Bogor",
    lat: -6.368849249069989,
    long: 106.83217054642523,
  },
  {
    id: "DepokBaru",
    name: "Depok Baru",
    isTransit: false,
    nodes: ["PondokCina", "Depok"],
    track: "Bogor",
    lat: -6.391083323067951,
    long: 106.82165340839013,
  },
  {
    id: "Depok",
    name: "Depok",
    isTransit: false,
    nodes: ["DepokBaru", "Citayam"],
    track: "Bogor",
    lat: -6.405238967825406,
    long: 106.81713458241855,
  },
  {
    id: "Citayam",
    name: "Citayam",
    isTransit: true,
    nodes: ["Depok", "Cibinong", "BojongGede"],
    track: "",
    lat: -6.448752314681174,
    long: 106.80244272126062,
  },
  {
    id: "BojongGede",
    name: "Bojong Gede",
    isTransit: false,
    nodes: ["Citayam", "Cilebut"],
    track: "Bogor",
    lat: -6.493237535284405,
    long: 106.79490578568829,
  },
  {
    id: "Cilebut",
    name: "Cilebut",
    nodes: ["BojongGede", "Bogor"],
    isTransit: false,
    track: "Bogor",
    lat: -6.530678738300323,
    long: 106.80058284335999,
  },
  {
    id: "Bogor",
    name: "Bogor",
    nodes: ["Cilebut"],
    isTransit: false,
    track: "Bogor",
    lat: -6.595380656340522,
    long: 106.79054374584788,
  },
  {
    id: "Cibinong",
    name: "Cibinong",
    nodes: ["Citayam", "Nambo"],
    isTransit: false,
    track: "Bogor",
    lat: -6.464140021632481,
    long: 106.85246032433295,
  },
  {
    id: "Nambo",
    name: "Nambo",
    nodes: ["Cibinong"],
    isTransit: false,
    track: "Bogor",
    lat: -6.4664285828636325,
    long: 106.90634900594216,
  },
];

export default function handler(req: NextApiRequest, res: NextApiResponse) {
  if (req.method !== "GET") {
    res.status(405).json({ error: "Method Not Allowed" });
    return;
  }

  const { authKey } = req.query;
  //@ts-ignore
  const decodeAuthorizationKey = Buffer.from(authKey, "base64").toString();
  const prefixedAuthKey = "CMT" + decodeAuthorizationKey;

  if (prefixedAuthKey !== process.env.NEXT_PUBLIC_COMUTE_AUTH_KEY) {
    res.status(401).json({ error: "401: Unauthorized" });
    return;
  }

  res.status(200).json({
    message: "Authenticated!",
    stations: stations,
    updated_at: "2022-10-22T10:00:00.000Z",
  });
}
